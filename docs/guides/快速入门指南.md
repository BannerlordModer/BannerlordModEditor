# Bannerlord Mod Editor - å¿«é€Ÿå…¥é—¨æŒ‡å—

## æ¦‚è¿°

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨Bannerlord Mod Editorå·¥å…·è¿›è¡Œéª‘é©¬ä¸ç æ€2æ¨¡ç»„å¼€å‘ã€‚æ— è®ºæ‚¨æ˜¯ä½¿ç”¨å›¾å½¢ç•Œé¢ã€å‘½ä»¤è¡Œå·¥å…·è¿˜æ˜¯ç»ˆç«¯ç•Œé¢ï¼Œæœ¬æŒ‡å—éƒ½å°†ä¸ºæ‚¨æä¾›æ¸…æ™°çš„æ­¥éª¤æŒ‡å¼•ã€‚

## ğŸ¯ é€‚åˆäººç¾¤

- **æ¨¡ç»„å¼€å‘è€…**ï¼šéœ€è¦ç¼–è¾‘XMLé…ç½®æ–‡ä»¶çš„æ¨¡ç»„ä½œè€…
- **å†…å®¹åˆ›ä½œè€…**ï¼šéœ€è¦æ‰¹é‡å¤„ç†æ¸¸æˆé…ç½®çš„å†…å®¹åˆ›ä½œè€…
- **æŠ€æœ¯çˆ±å¥½è€…**ï¼šå¯¹æ¸¸æˆé…ç½®æ–‡ä»¶å¤„ç†æ„Ÿå…´è¶£çš„æŠ€æœ¯äººå‘˜
- **æ–°æ‰‹å¼€å‘è€…**ï¼šæƒ³è¦å­¦ä¹ XMLå¤„ç†çš„åˆå­¦è€…

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

#### ç³»ç»Ÿè¦æ±‚
- **.NET 9.0 SDK**ï¼ˆå¿…éœ€ï¼‰
- **å†…å­˜**ï¼šæ¨è8GBä»¥ä¸Š
- **ç³»ç»Ÿ**ï¼šWindowsã€macOSã€Linuxå‡å¯

#### å®‰è£….NET 9.0
```bash
# Ubuntu/Debian
wget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.deb
sudo dpkg -i packages-microsoft-prod.deb
sudo apt-get update
sudo apt-get install -y dotnet-sdk-9.0

# macOS (ä½¿ç”¨Homebrew)
brew install dotnet

# Windows
# ä¸‹è½½å¹¶å®‰è£… .NET 9.0 SDK from https://dotnet.microsoft.com/download
```

### ç¬¬äºŒæ­¥ï¼šè·å–é¡¹ç›®

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd BannerlordModEditor-CLI

# è¿˜åŸä¾èµ–
dotnet restore

# æ„å»ºé¡¹ç›®
dotnet build
```

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œæµ‹è¯•ï¼ˆæ¨èï¼‰

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿ç¯å¢ƒæ­£å¸¸
dotnet test --verbosity normal
```

## ğŸ› ï¸ é€‰æ‹©æ‚¨çš„å·¥å…·

Bannerlord Mod Editoræä¾›ä¸‰ç§ç•Œé¢é€‰æ‹©ï¼š

### 1. å›¾å½¢ç•Œé¢ (GUI) - é€‚åˆæ–°æ‰‹
```bash
# å¯åŠ¨å›¾å½¢ç•Œé¢
dotnet run --project BannerlordModEditor.UI
```

**ç‰¹ç‚¹**ï¼š
- å¯è§†åŒ–æ“ä½œï¼Œç›´è§‚æ˜“ç”¨
- æ‹–æ‹½æ–‡ä»¶å¤„ç†
- å®æ—¶é¢„è§ˆå’Œç¼–è¾‘
- é€‚åˆä¸ç†Ÿæ‚‰å‘½ä»¤è¡Œçš„ç”¨æˆ·

### 2. å‘½ä»¤è¡Œå·¥å…· (CLI) - é€‚åˆå¼€å‘è€…
```bash
# æŸ¥çœ‹å¸®åŠ©
dotnet run --project BannerlordModEditor.Cli -- --help

# åˆ—å‡ºæ”¯æŒçš„æ¨¡å‹
dotnet run --project BannerlordModEditor.Cli -- list-models
```

**ç‰¹ç‚¹**ï¼š
- æ‰¹é‡å¤„ç†èƒ½åŠ›å¼º
- å¯é›†æˆåˆ°è„šæœ¬ä¸­
- è¯¦ç»†çš„æ—¥å¿—è¾“å‡º
- é€‚åˆè‡ªåŠ¨åŒ–ä»»åŠ¡

### 3. ç»ˆç«¯ç•Œé¢ (TUI) - é€‚åˆé«˜çº§ç”¨æˆ·
```bash
# å¯åŠ¨ç»ˆç«¯ç•Œé¢
dotnet run --project BannerlordModEditor.TUI
```

**ç‰¹ç‚¹**ï¼š
- é”®ç›˜å¿«æ·é”®æ“ä½œ
- èµ„æºå ç”¨ä½
- è¿œç¨‹æœåŠ¡å™¨å‹å¥½
- é€‚åˆç†Ÿæ‚‰ç»ˆç«¯çš„ç”¨æˆ·

## ğŸ“‹ å¸¸ç”¨ä»»åŠ¡æŒ‡å—

### ä»»åŠ¡1ï¼šå°†Excelè½¬æ¢ä¸ºXML

#### ä½¿ç”¨CLI
```bash
# è½¬æ¢Excelåˆ°XML
dotnet run --project BannerlordModEditor.Cli -- convert -i "actions.xlsx" -o "actions.xml" -m "ActionTypesDO"
```

#### ä½¿ç”¨GUI
1. å¯åŠ¨GUIåº”ç”¨ç¨‹åº
2. ç‚¹å‡»"æ‰“å¼€æ–‡ä»¶"é€‰æ‹©Excelæ–‡ä»¶
3. é€‰æ‹©è½¬æ¢ç±»å‹ï¼ˆExcelâ†’XMLï¼‰
4. é€‰æ‹©æ•°æ®æ¨¡å‹ç±»å‹
5. ç‚¹å‡»"è½¬æ¢"æŒ‰é’®

#### ä½¿ç”¨TUI
1. å¯åŠ¨TUIåº”ç”¨ç¨‹åº
2. æŒ‰F2é€‰æ‹©æºæ–‡ä»¶ï¼ˆExcelï¼‰
3. æŒ‰F4é€‰æ‹©ç›®æ ‡æ–‡ä»¶ï¼ˆXMLï¼‰
4. æŒ‰F1åˆ‡æ¢è½¬æ¢æ–¹å‘
5. æŒ‰F5æ‰§è¡Œè½¬æ¢

### ä»»åŠ¡2ï¼šå°†XMLè½¬æ¢ä¸ºExcel

#### ä½¿ç”¨CLI
```bash
# è½¬æ¢XMLåˆ°Excel
dotnet run --project BannerlordModEditor.Cli -- convert -i "actions.xml" -o "actions.xlsx"
```

#### ä½¿ç”¨GUI
1. å¯åŠ¨GUIåº”ç”¨ç¨‹åº
2. ç‚¹å‡»"æ‰“å¼€æ–‡ä»¶"é€‰æ‹©XMLæ–‡ä»¶
3. é€‰æ‹©è½¬æ¢ç±»å‹ï¼ˆXMLâ†’Excelï¼‰
4. ç‚¹å‡»"è½¬æ¢"æŒ‰é’®

#### ä½¿ç”¨TUI
1. å¯åŠ¨TUIåº”ç”¨ç¨‹åº
2. æŒ‰F2é€‰æ‹©æºæ–‡ä»¶ï¼ˆXMLï¼‰
3. æŒ‰F4é€‰æ‹©ç›®æ ‡æ–‡ä»¶ï¼ˆExcelï¼‰
4. æŒ‰F1åˆ‡æ¢è½¬æ¢æ–¹å‘
5. æŒ‰F5æ‰§è¡Œè½¬æ¢

### ä»»åŠ¡3ï¼šè¯†åˆ«XMLæ–‡ä»¶ç±»å‹

#### ä½¿ç”¨CLI
```bash
# è¯†åˆ«XMLæ–‡ä»¶ç±»å‹
dotnet run --project BannerlordModEditor.Cli -- recognize -i "unknown_file.xml"

# æ‰¹é‡è¯†åˆ«ç›®å½•ä¸­çš„XMLæ–‡ä»¶
dotnet run --project BannerlordModEditor.Cli -- recognize --directory "ModuleData" --recursive
```

#### ä½¿ç”¨GUI
1. å¯åŠ¨GUIåº”ç”¨ç¨‹åº
2. ç‚¹å‡»"æ‰“å¼€æ–‡ä»¶"é€‰æ‹©XMLæ–‡ä»¶
3. æŸ¥çœ‹è‡ªåŠ¨è¯†åˆ«çš„æ–‡ä»¶ç±»å‹ä¿¡æ¯

### ä»»åŠ¡4ï¼šéªŒè¯Excelæ ¼å¼

#### ä½¿ç”¨CLI
```bash
# éªŒè¯Excelæ ¼å¼
dotnet run --project BannerlordModEditor.Cli -- convert -i "actions.xlsx" -o "temp.xml" -m "ActionTypesDO" --validate
```

## ğŸ“Š æ”¯æŒçš„æ•°æ®æ¨¡å‹

### æ ¸å¿ƒæ¸¸æˆæœºåˆ¶
| æ¨¡å‹åç§° | ç”¨é€” | æ–‡ä»¶ç¤ºä¾‹ |
|----------|------|----------|
| ActionTypesDO | åŠ¨ä½œç±»å‹é…ç½® | action_types.xml |
| CombatParametersDO | æˆ˜æ–—å‚æ•° | combat_parameters.xml |
| ActionSetsDO | åŠ¨ä½œé›†é…ç½® | action_sets.xml |
| AttributesDO | è§’è‰²å±æ€§ | attributes.xml |
| SkillsDO | æŠ€èƒ½é…ç½® | skills.xml |

### ç‰©å“ç³»ç»Ÿ
| æ¨¡å‹åç§° | ç”¨é€” | æ–‡ä»¶ç¤ºä¾‹ |
|----------|------|----------|
| ItemModifiersDO | ç‰©å“ä¿®é¥°ç¬¦ | item_modifiers.xml |
| CraftingPiecesDO | åˆ¶ä½œéƒ¨ä»¶ | crafting_pieces.xml |
| ItemHolstersDO | ç‰©å“æºå¸¦ä½ç½® | item_holsters.xml |

### å¤šäººæ¸¸æˆ
| æ¨¡å‹åç§° | ç”¨é€” | æ–‡ä»¶ç¤ºä¾‹ |
|----------|------|----------|
| MpItemsDO | å¤šäººç‰©å“ | mpitems.xml |
| MpCraftingPiecesDO | å¤šäººåˆ¶ä½œéƒ¨ä»¶ | mp_crafting_pieces.xml |
| MpCosmeticsDO | å¤šäººè£…é¥°å“ | mpcosmetics.xml |

### æŸ¥çœ‹å®Œæ•´åˆ—è¡¨
```bash
dotnet run --project BannerlordModEditor.Cli -- list-models --detailed
```

## ğŸ“ æ–‡ä»¶æ ¼å¼è¦æ±‚

### Excelæ–‡ä»¶æ ¼å¼
```
name        | type        | usage_direction | action_stage
------------|-------------|-----------------|--------------
attack_1    | thrust      | forward         | ready
attack_2    | swing       | horizontal     | ready
defend_1    | block       | up              | ready
```

**è¦æ±‚**ï¼š
- ç¬¬ä¸€è¡Œå¿…é¡»ä¸ºåˆ—æ ‡é¢˜
- åˆ—ååº”ä¸XMLå…ƒç´ å¯¹åº”
- æ”¯æŒæ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸç­‰åŸºæœ¬ç±»å‹
- å»ºè®®ä½¿ç”¨UTF-8ç¼–ç 

### XMLæ–‡ä»¶æ ¼å¼
```xml
<?xml version="1.0" encoding="utf-8"?>
<action_types>
  <action>
    <name>attack_1</name>
    <type>thrust</type>
    <usage_direction>forward</usage_direction>
    <action_stage>ready</action_stage>
  </action>
  <action>
    <name>attack_2</name>
    <type>swing</type>
    <usage_direction>horizontal</usage_direction>
    <action_stage>ready</action_stage>
  </action>
</action_types>
```

**è¦æ±‚**ï¼š
- å¿…é¡»ä¸ºæœ‰æ•ˆçš„XMLæ–‡æ¡£
- ä½¿ç”¨UTF-8ç¼–ç 
- æ ¹å…ƒç´ åç§°ä¸æ•°æ®æ¨¡å‹å¯¹åº”

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### åœºæ™¯1ï¼šæ¨¡ç»„å¼€å‘
```bash
# 1. å°†æ¸¸æˆXMLå¯¼å‡ºä¸ºExcelä¾¿äºç¼–è¾‘
dotnet run --project BannerlordModEditor.Cli -- convert -i "ModuleData/action_types.xml" -o "action_types_editable.xlsx"

# 2. åœ¨Excelä¸­ç¼–è¾‘æ•°æ®...

# 3. å°†ç¼–è¾‘åçš„Excelè½¬æ¢å›XML
dotnet run --project BannerlordModEditor.Cli -- convert -i "action_types_editable.xlsx" -o "ModuleData/action_types_modified.xml" -m "ActionTypesDO"
```

### åœºæ™¯2ï¼šæ‰¹é‡å¤„ç†
```bash
# æ‰¹é‡è½¬æ¢å¤šä¸ªXMLæ–‡ä»¶
for file in ModuleData/*.xml; do
    echo "å¤„ç† $file"
    dotnet run --project BannerlordModEditor.Cli -- convert -i "$file" -o "${file%.xml}.xlsx"
done
```

### åœºæ™¯3ï¼šæ•°æ®åˆ†æ
```bash
# 1. å°†XMLè½¬æ¢ä¸ºExcelè¿›è¡Œåˆ†æ
dotnet run --project BannerlordModEditor.Cli -- convert -i "items.xml" -o "items_analysis.xlsx"

# 2. åœ¨Excelä¸­ä½¿ç”¨æ•°æ®é€è§†è¡¨ã€å›¾è¡¨ç­‰å·¥å…·åˆ†ææ•°æ®

# 3. æ ¹æ®åˆ†æç»“æœè°ƒæ•´æ¸¸æˆå¹³è¡¡æ€§
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. .NETç¯å¢ƒé—®é¢˜
```bash
# æ£€æŸ¥.NETç‰ˆæœ¬
dotnet --version

# å¦‚æœç‰ˆæœ¬ä¸æ˜¯9.0ï¼Œè¯·å®‰è£…æ­£ç¡®çš„ç‰ˆæœ¬
```

#### 2. æ–‡ä»¶è·¯å¾„é—®é¢˜
```bash
# ä½¿ç”¨ç»å¯¹è·¯å¾„é¿å…è·¯å¾„é—®é¢˜
dotnet run --project BannerlordModEditor.Cli -- convert -i "/full/path/to/file.xlsx" -o "/full/path/to/output.xml" -m "ActionTypesDO"
```

#### 3. æ¨¡å‹ç±»å‹é”™è¯¯
```bash
# æŸ¥çœ‹æ”¯æŒçš„æ¨¡å‹ç±»å‹
dotnet run --project BannerlordModEditor.Cli -- list-models

# æœç´¢ç‰¹å®šæ¨¡å‹
dotnet run --project BannerlordModEditor.Cli -- list-models --search "action"
```

#### 4. å†…å­˜ä¸è¶³
```bash
# åˆ†æ‰¹å¤„ç†å¤§æ–‡ä»¶
# æˆ–è€…å¢åŠ ç³»ç»Ÿå†…å­˜
```

### è·å–å¸®åŠ©

#### å‘½ä»¤è¡Œå¸®åŠ©
```bash
# ä¸»å¸®åŠ©
dotnet run --project BannerlordModEditor.Cli -- --help

# ç‰¹å®šå‘½ä»¤å¸®åŠ©
dotnet run --project BannerlordModEditor.Cli -- convert --help
```

#### è¯¦ç»†æ—¥å¿—
```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
dotnet run --project BannerlordModEditor.Cli -- convert -i "data.xlsx" -o "data.xml" -m "ActionTypesDO" --verbose
```

## ğŸ“š è¿›é˜¶å­¦ä¹ 

### å®Œæ•´æ–‡æ¡£
- [CLIç”¨æˆ·æŒ‡å—](guides/CLIç”¨æˆ·æŒ‡å—.md) - è¯¦ç»†çš„CLIä½¿ç”¨è¯´æ˜
- [TUIç”¨æˆ·æŒ‡å—](guides/TUIç”¨æˆ·æŒ‡å—.md) - ç»ˆç«¯ç•Œé¢ä½¿ç”¨æŒ‡å—
- [æ¶æ„è®¾è®¡æ–‡æ¡£](reference/architecture.md) - ç³»ç»Ÿæ¶æ„è¯´æ˜
- [æŠ€æœ¯è§„æ ¼æ–‡æ¡£](development/technical/) - å®Œæ•´æŠ€æœ¯è§„æ ¼

### å¼€å‘æŒ‡å—
- [æ·»åŠ æ–°çš„XMLé€‚é…](development/technical/xml-adaptation-implementation-guide.md)
- [æµ‹è¯•ç­–ç•¥](guides/comprehensive-test-suite.md)
- [é¡¹ç›®è®¡åˆ’](development/project/) - é¡¹ç›®éœ€æ±‚å’Œè®¡åˆ’

### ç¤ºä¾‹å’Œæ¨¡æ¿
- `example/ModuleData/` - çœŸå®çš„æ¸¸æˆXMLæ–‡ä»¶ç¤ºä¾‹
- `BannerlordModEditor.Common.Tests/TestData/` - æµ‹è¯•æ•°æ®æ–‡ä»¶

## ğŸ¤ ç¤¾åŒºå’Œæ”¯æŒ

### è·å–å¸®åŠ©
- **GitHub Issues**ï¼šæŠ¥å‘Šbugå’ŒåŠŸèƒ½è¯·æ±‚
- **è®¨è®ºåŒº**ï¼šæŠ€æœ¯è®¨è®ºå’Œç»éªŒåˆ†äº«
- **æ–‡æ¡£**ï¼šè¯¦ç»†çš„ä½¿ç”¨æŒ‡å—å’ŒæŠ€æœ¯æ–‡æ¡£

### è´¡çŒ®ä»£ç 
1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤æ›´æ”¹å¹¶æµ‹è¯•
4. åˆ›å»ºPull Request

## ğŸ“ˆ ä¸‹ä¸€æ­¥

### ç†Ÿæ‚‰åŸºç¡€æ“ä½œåï¼Œæ‚¨å¯ä»¥ï¼š

1. **æ¢ç´¢é«˜çº§åŠŸèƒ½**ï¼šå­¦ä¹ æ‰¹é‡å¤„ç†ã€è„šæœ¬é›†æˆç­‰é«˜çº§ç”¨æ³•
2. **è‡ªå®šä¹‰æ¨¡å‹**ï¼šäº†è§£å¦‚ä½•æ·»åŠ æ–°çš„æ•°æ®æ¨¡å‹æ”¯æŒ
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šå­¦ä¹ å¦‚ä½•ä¼˜åŒ–å¤§æ–‡ä»¶å¤„ç†æ€§èƒ½
4. **è´¡çŒ®ä»£ç **ï¼šä¸ºé¡¹ç›®è´¡çŒ®æ–°åŠŸèƒ½å’Œæ”¹è¿›

### æ¨èå­¦ä¹ è·¯å¾„ï¼š
1. åŸºç¡€æ–‡ä»¶è½¬æ¢ï¼ˆå½“å‰æŒ‡å—ï¼‰
2. [CLIç”¨æˆ·æŒ‡å—](guides/CLIç”¨æˆ·æŒ‡å—.md) - æ·±å…¥CLIåŠŸèƒ½
3. [TUIç”¨æˆ·æŒ‡å—](guides/TUIç”¨æˆ·æŒ‡å—.md) - å­¦ä¹ ç»ˆç«¯ç•Œé¢
4. [æŠ€æœ¯è§„æ ¼æ–‡æ¡£](development/technical/) - äº†è§£æŠ€æœ¯å®ç°
5. [é¡¹ç›®è®¡åˆ’](development/project/) - å‚ä¸é¡¹ç›®å¼€å‘

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·éšæ—¶å¯»æ±‚å¸®åŠ©ã€‚**

**æœ€åæ›´æ–°**: 2025å¹´8æœˆ26æ—¥  
**é¡¹ç›®çŠ¶æ€**: ç”Ÿäº§å°±ç»ª  
**ç»´æŠ¤å›¢é˜Ÿ**: BannerlordModEditorå¼€å‘å›¢é˜Ÿ